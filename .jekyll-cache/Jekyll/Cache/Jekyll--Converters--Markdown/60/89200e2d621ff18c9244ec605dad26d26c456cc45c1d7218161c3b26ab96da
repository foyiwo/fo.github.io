I"›<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
	public SpringApplication(ResourceLoader resourceLoader, Class&lt;?&gt;... primarySources) {
        //èµ„æºåŠ è½½å™¨ï¼Œspringbootä¼ å…¥Null
		this.resourceLoader = resourceLoader;
		Assert.notNull(primarySources, "PrimarySources must not be null");

        //åˆå§‹åŒ–äº†ä¸€ä¸ªå®¹å™¨å­˜å‚¨ å¯åŠ¨ç±»
		this.primarySources = new LinkedHashSet&lt;&gt;(Arrays.asList(primarySources));

        //é€šè¿‡ClassPathæ¨æ–­Applicationçš„ç±»å‹
		this.webApplicationType = WebApplicationType.deduceFromClasspath();

		//åˆå§‹åŒ–
		setInitializers((Collection) getSpringFactoriesInstances(
				ApplicationContextInitializer.class));

		//åˆå§‹åŒ–äº‹ä»¶ç›‘å¬å™¨
		setListeners((Collection) getSpringFactoriesInstances(ApplicationListener.class));
		//æ ¹æ®mainæ¨æ–­ApplicationClass
		this.mainApplicationClass = deduceMainApplicationClass();
	}

</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public ConfigurableApplicationContext run(String... args) {
        // 1ã€åˆ›å»ºå¹¶å¯åŠ¨è®¡æ—¶ç›‘æ§ç±»
		StopWatch stopWatch = new StopWatch();
		stopWatch.start();

		ConfigurableApplicationContext context = null;
		Collection&lt;SpringBootExceptionReporter&gt; exceptionReporters = new ArrayList&lt;&gt;();
		
        // 3ã€è®¾ç½®ç³»ç»Ÿå±æ€§ `java.awt.headless` çš„å€¼ï¼Œé»˜è®¤å€¼ä¸ºï¼štrue,å…è®¸springåœ¨æ— æ˜¾ç¤ºå™¨ã€æ— é”®ç›˜ç­‰å¤–ç•Œè®¾å¤‡çš„æƒ…å†µä¸‹å¯åŠ¨
        configureHeadlessProperty();
		
        // 4ã€åˆ›å»ºæ‰€æœ‰ Spring è¿è¡Œç›‘å¬å™¨å¹¶å‘å¸ƒåº”ç”¨å¯åŠ¨äº‹ä»¶
        SpringApplicationRunListeners listeners = getRunListeners(args);
		listeners.starting();


		try {
			ApplicationArguments applicationArguments = new DefaultApplicationArguments(
					args);

			//ConfigFileApplicationListener è¿™ä¸ªç±»æ¥å—environmentPreparedäº‹ä»¶ï¼Œè¿›è¡Œç¯å¢ƒæ–‡ä»¶çš„è§£æ
			ConfigurableEnvironment environment = prepareEnvironment(listeners,
					applicationArguments);
			configureIgnoreBeanInfo(environment);

			//å¯åŠ¨è¿‡ç¨‹ä¸­ï¼Œæ‰“å°springbootçš„æ ‡å¿—ï¼ˆLOGOï¼‰
			Banner printedBanner = printBanner(environment);

			//é€šè¿‡åå°„åˆ›å»ºäº†ä¸€ä¸ª`org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext`
			//è¿™ä¸ªå°±æ˜¯Springçš„ä¸Šä¸‹æ–‡äº†ï¼Œä¸‹é¢éƒ½æ˜¯å¼€å§‹å¡«è¡¥è¿™ä¸ªè¿™ä¸ªå¯¹è±¡
			context = createApplicationContext();

			exceptionReporters = getSpringFactoriesInstances(
					SpringBootExceptionReporter.class,
					new Class[] { ConfigurableApplicationContext.class }, context);
			prepareContext(context, environment, listeners, applicationArguments,
					printedBanner);
			refreshContext(context);
			afterRefresh(context, applicationArguments);
			stopWatch.stop();
			if (this.logStartupInfo) {
				new StartupInfoLogger(this.mainApplicationClass)
						.logStarted(getApplicationLog(), stopWatch);
			}
			listeners.started(context);
			callRunners(context, applicationArguments);
		}
		catch (Throwable ex) {
			handleRunFailure(context, ex, exceptionReporters, listeners);
			throw new IllegalStateException(ex);
		}

		try {
			listeners.running(context);
		}
		catch (Throwable ex) {
			handleRunFailure(context, ex, exceptionReporters, null);
			throw new IllegalStateException(ex);
		}
		return context;
	}

</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>


</code></pre></div></div>

:ET